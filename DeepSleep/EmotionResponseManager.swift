import Foundation

class EmotionResponseManager {
    static let shared = EmotionResponseManager()
    
    private init() {}
    
    // ì´ëª¨ì§€ë³„ ì‘ë‹µ ë°ì´í„°
    private let emotionResponses: [String: [EmotionResponse]] = [
        "ğŸ˜´": [ // ì¡¸ë¦¼
            EmotionResponse(
                messages: [
                    "ì¡¸ë¦° í•˜ë£¨ë„¤ìš”! í¸ì•ˆí•œ ì ìë¦¬ë¡œ ì•ˆë‚´í•´ë“œë¦´ê²Œìš” ğŸ’¤",
                    "ì ì´ ì†”ì†” ì˜¤ëŠ”êµ°ìš”~ ë‹¬ì½¤í•œ ê¿ˆë‚˜ë¼ë¡œ ë– ë‚˜ë³¼ê¹Œìš”?",
                    "í”¼ê³¤í•˜ì‹ ê°€ ë´ìš”. ê¹Šì€ íœ´ì‹ì„ ìœ„í•œ ì‚¬ìš´ë“œë¥¼ ì¤€ë¹„í–ˆì–´ìš”",
                    "ì¡¸ìŒì´ ëª°ë ¤ì˜¤ë„¤ìš”! í‰í™”ë¡œìš´ ë°¤ì„ ìœ„í•œ ì¡°í•©ì´ì—ìš”"
                ],
                presets: [
                    PresetData(name: "ê¿€ì  ì¡°í•©", volumes: [0, 30, 0, 25, 35, 0, 0, 0, 0, 15, 0]),
                    PresetData(name: "ë‹¬ì½¤í•œ ìì¥ê°€", volumes: [0, 0, 0, 20, 40, 0, 0, 0, 0, 25, 0]),
                    PresetData(name: "í¸ì•ˆí•œ íœ´ì‹", volumes: [0, 25, 0, 0, 30, 0, 0, 0, 0, 20, 0]),
                    PresetData(name: "ê¹Šì€ ì  ìœ ë„", volumes: [0, 35, 0, 15, 25, 0, 0, 0, 0, 30, 0])
                ]
            )
        ],
        "ğŸ˜¢": [ // ìŠ¬í””
            EmotionResponse(
                messages: [
                    "ë§ˆìŒì´ ë¬´ê±°ìš°ì‹œêµ°ìš”. ë”°ëœ»í•œ ìœ„ë¡œê°€ ë˜ëŠ” ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ì„¸ìš” ğŸ¤—",
                    "ìŠ¬í”ˆ ê°ì •ë„ ì†Œì¤‘í•´ìš”. ì°¨ë¶„íˆ ë§ˆìŒì„ ë‹¬ë˜ì£¼ëŠ” ì‚¬ìš´ë“œì˜ˆìš”",
                    "í˜ë“  í•˜ë£¨ì˜€ë‚˜ìš”? ë§ˆìŒì„ ì–´ë£¨ë§Œì ¸ì£¼ëŠ” ì¡°í•©ì„ ì¤€ë¹„í–ˆì–´ìš”",
                    "ê´œì°®ì•„ìš”, ëª¨ë“  ê°ì •ì€ ì§€ë‚˜ê°‘ë‹ˆë‹¤. í‰ì˜¨í•¨ì„ ì°¾ì•„ë“œë¦´ê²Œìš”"
                ],
                presets: [
                    PresetData(name: "ë§ˆìŒì˜ ìœ„ë¡œ", volumes: [0, 40, 0, 20, 0, 0, 0, 0, 0, 25, 0]),
                    PresetData(name: "ë”°ëœ»í•œ í¬ì˜¹", volumes: [0, 30, 0, 25, 15, 0, 0, 0, 0, 20, 0]),
                    PresetData(name: "ì°¨ë¶„í•œ íë§", volumes: [0, 35, 0, 15, 20, 0, 0, 0, 0, 30, 0]),
                    PresetData(name: "ê°ì • ì •í™”", volumes: [0, 25, 0, 30, 0, 0, 0, 0, 0, 35, 0])
                ]
            )
        ],
        "ğŸ˜ ": [ // í™”ë‚¨
            EmotionResponse(
                messages: [
                    "í™”ê°€ ë‚˜ì…¨êµ°ìš”! ë§ˆìŒì„ ì§„ì •ì‹œí‚¤ëŠ” ì†Œë¦¬ë¡œ ì•ˆì •ê°ì„ ì°¾ì•„ë³´ì„¸ìš” ğŸŒŠ",
                    "ë¶„ë…¸ì˜ ê°ì •ì´ ëŠê»´ì ¸ìš”. ì°¨ê°€ìš´ ë°”ëŒ ì†Œë¦¬ë¡œ ë§ˆìŒì„ ì‹í˜€ë³´ì„¸ìš”",
                    "í¥ë¶„ëœ ë§ˆìŒì„ ë‹¬ë˜ë“œë¦´ê²Œìš”. ìì—°ì˜ ì†Œë¦¬ê°€ ë„ì›€ì´ ë  ê±°ì˜ˆìš”",
                    "í™”ë‚œ ë§ˆìŒ, ì´í•´í•´ìš”. í‰ì •ì‹¬ì„ ë˜ì°¾ëŠ” ì‚¬ìš´ë“œ ì¡°í•©ì´ì—ìš”"
                ],
                presets: [
                    PresetData(name: "ë¶„ë…¸ í•´ì†Œ", volumes: [15, 0, 30, 0, 0, 25, 0, 0, 0, 0, 20]),
                    PresetData(name: "ë§ˆìŒ ì§„ì •", volumes: [20, 0, 25, 0, 0, 30, 0, 0, 0, 0, 15]),
                    PresetData(name: "ì°¨ê°€ìš´ ë°”ëŒ", volumes: [10, 0, 35, 0, 0, 20, 0, 0, 0, 0, 25]),
                    PresetData(name: "ê°ì • ì •ë¦¬", volumes: [25, 0, 20, 0, 0, 35, 0, 0, 0, 0, 10])
                ]
            )
        ],
        "ğŸ˜Š": [ // í–‰ë³µí•¨
            EmotionResponse(
                messages: [
                    "ê¸°ë¶„ì´ ì¢‹ìœ¼ì‹œë„¤ìš”! ì¦ê±°ìš´ ì—ë„ˆì§€ë¥¼ ë”í•´ì¤„ ì‚¬ìš´ë“œì˜ˆìš” âœ¨",
                    "í–‰ë³µí•œ ìˆœê°„ì´êµ°ìš”~ ê¸ì •ì ì¸ ë°”ì´ë¸Œì˜ ì¡°í•©ì„ ì¤€ë¹„í–ˆì–´ìš”",
                    "ì¢‹ì€ í•˜ë£¨ì¸ê°€ ë´ìš”! ë°ì€ ì—ë„ˆì§€ì˜ ì‚¬ìš´ë“œë¡œ ë” ê¸°ë¶„ ì¢‹ê²Œ ğŸ’«",
                    "ë¯¸ì†Œê°€ ë³´ì´ëŠ” ê²ƒ ê°™ì•„ìš”! ì¦ê±°ìš´ ì‹œê°„ì„ ìœ„í•œ íŠ¹ë³„í•œ ì¡°í•©ì´ì—ìš”"
                ],
                presets: [
                    PresetData(name: "í–‰ë³µí•œ ìˆœê°„", volumes: [25, 0, 0, 30, 0, 0, 20, 0, 0, 0, 15]),
                    PresetData(name: "ê¸ì • ì—ë„ˆì§€", volumes: [30, 0, 0, 25, 0, 0, 15, 0, 0, 0, 20]),
                    PresetData(name: "ì¦ê±°ìš´ ì‹œê°„", volumes: [20, 0, 0, 35, 0, 0, 25, 0, 0, 0, 10]),
                    PresetData(name: "ë°ì€ í•˜ë£¨", volumes: [35, 0, 0, 20, 0, 0, 30, 0, 0, 0, 5])
                ]
            )
        ],
        "ğŸ˜”": [ // ìš°ìš¸í•¨
            EmotionResponse(
                messages: [
                    "ìš°ìš¸í•œ ê¸°ë¶„ì´ì‹œêµ°ìš”. ë”°ìŠ¤í•œ ê°ì‹¸ì£¼ëŠ” ì†Œë¦¬ë¡œ ìœ„ë¡œë°›ì•„ë³´ì„¸ìš” ğŸ’™",
                    "ë§ˆìŒì´ ê°€ë¼ì•‰ì•„ ìˆë‚˜ìš”? ë¶€ë“œëŸ¬ìš´ ì‚¬ìš´ë“œë¡œ ë§ˆìŒì„ ì–´ë£¨ë§Œì ¸ë“œë¦´ê²Œìš”",
                    "í˜ì´ ì—†ëŠ” í•˜ë£¨ë„¤ìš”. ì¡°ìš©íˆ ë§ˆìŒì„ ë‹¬ë˜ì£¼ëŠ” ì¡°í•©ì´ì—ìš”",
                    "ìš°ìš¸í•œ ê°ì •ë„ ê´œì°®ì•„ìš”. ì²œì²œíˆ íšŒë³µí•  ìˆ˜ ìˆë„ë¡ ë„ì™€ë“œë¦´ê²Œìš”"
                ],
                presets: [
                    PresetData(name: "ìš°ìš¸í•¨ ë‹¬ë˜ê¸°", volumes: [0, 35, 0, 15, 25, 0, 0, 0, 0, 20, 0]),
                    PresetData(name: "ë§ˆìŒì˜ ì•ˆì‹", volumes: [0, 30, 0, 20, 30, 0, 0, 0, 0, 15, 0]),
                    PresetData(name: "ë¶€ë“œëŸ¬ìš´ ìœ„ë¡œ", volumes: [0, 40, 0, 10, 20, 0, 0, 0, 0, 25, 0]),
                    PresetData(name: "ê³ ìš”í•œ ì¹˜ìœ ", volumes: [0, 25, 0, 25, 35, 0, 0, 0, 0, 10, 0])
                ]
            )
        ],
        "ğŸ˜": [ // í‰ë²”í•¨
            EmotionResponse(
                messages: [
                    "í‰ë²”í•œ í•˜ë£¨ë„¤ìš”! ì¼ìƒì— ì‘ì€ íŠ¹ë³„í•¨ì„ ë”í•´ë³´ì„¸ìš” ğŸµ",
                    "ë¬´ë‚œí•œ ê¸°ë¶„ì´êµ°ìš”. ì ë‹¹íˆ ê¸°ë¶„ ì „í™˜ì´ ë˜ëŠ” ì‚¬ìš´ë“œì˜ˆìš”",
                    "ê·¸ëƒ¥ ê·¸ëŸ° í•˜ë£¨ì¸ê°€ìš”? ì€ì€í•œ ë°°ê²½ ì‚¬ìš´ë“œë¡œ ë¶„ìœ„ê¸°ë¥¼ ë°”ê¿”ë³´ì„¸ìš”",
                    "í‰ì˜¨í•œ ìƒíƒœë„¤ìš”. ì¼ìƒì˜ ë¦¬ë“¬ê°ì„ ë”í•´ì¤„ ì¡°í•©ì´ì—ìš”"
                ],
                presets: [
                    PresetData(name: "ì¼ìƒì˜ ì„ ìœ¨", volumes: [15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0]),
                    PresetData(name: "ë¬´ë‚œí•œ ë°°ê²½", volumes: [20, 10, 20, 10, 20, 10, 0, 0, 0, 0, 0]),
                    PresetData(name: "í‰ë²”í•œ íŠ¹ë³„í•¨", volumes: [10, 20, 10, 20, 10, 20, 0, 0, 0, 0, 0]),
                    PresetData(name: "ê· í˜•ì¡íŒ í•˜ë£¨", volumes: [18, 12, 18, 12, 18, 12, 0, 0, 0, 0, 0])
                ]
            )
        ]
    ]
    
    // ëœë¤ ì‘ë‹µ ê°€ì ¸ì˜¤ê¸°
    func getRandomResponse(for emoji: String) -> EmotionResponse? {
        guard let responses = emotionResponses[emoji] else { return nil }
        return responses.randomElement()
    }
    
    // íŠ¹ì • ì´ëª¨ì§€ì˜ ëª¨ë“  ì‘ë‹µ ê°€ì ¸ì˜¤ê¸°
    func getAllResponses(for emoji: String) -> [EmotionResponse] {
        return emotionResponses[emoji] ?? []
    }
}

// MARK: - ë°ì´í„° ëª¨ë¸
struct EmotionResponse {
    let messages: [String]
    let presets: [PresetData]
    
    // ëœë¤ ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸°
    var randomMessage: String {
        return messages.randomElement() ?? "ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë–¤ê°€ìš”?"
    }
    
    // ëœë¤ í”„ë¦¬ì…‹ ê°€ì ¸ì˜¤ê¸°
    var randomPreset: PresetData {
        return presets.randomElement() ?? PresetData(name: "ê¸°ë³¸ ì¡°í•©", volumes: Array(repeating: 20, count: 11))
    }
}

struct PresetData {
    let name: String
    let volumes: [Int]
    
    // Float ë°°ì—´ë¡œ ë³€í™˜
    var floatVolumes: [Float] {
        return volumes.map { Float($0) }
    }
} 